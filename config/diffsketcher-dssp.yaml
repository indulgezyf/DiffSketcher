image_size: 224
path_svg: ~ # if you want to load a svg file and train from it
mask_object: False # if the target image contains background, it's better to mask it out
fix_scale: False  # if the target image is not squared, it is recommended to fix the scale

# train
num_iter: 500  # Reduced for faster testing
batch_size: 1
num_stages: 1
lr_scheduler: False
lr_decay_rate: 0.1
decay_steps: [ 1000, 1500 ]
lr: 1
color_lr: 0.01
pruning_freq: 50
color_vars_threshold: 0.1
width_lr: 0.1
max_width: 50

# stroke attrs
num_paths: 96
width: 1.5
control_points_per_seg: 4
num_segments: 1
optim_opacity: True
optim_width: False
optim_rgba: False
opacity_delta: 0

# init strokes
attention_init: True
xdog_intersec: True
softmax_temp: 0.5
cross_attn_res: 16
self_attn_res: 32
max_com: 20
mean_comp: False
comp_idx: 0
attn_coeff: 1.0
log_cross_attn: False
u2net_path: "./checkpoint/u2net/u2net.pth"

# ldm
model_id: "sd15"
ldm_speed_up: False
enable_xformers: True
gradient_checkpoint: False
token_ind: 4
use_ddim: True
num_inference_steps: 100
guidance_scale: 7.5

# ðŸ”¥ DSSP Improvements (Both Features Combined)
use_dynamic_weights: False  # Disable for cleaner test
use_directional_clip: True  # âœ… Enable directional CLIP loss
style_prompt: "a charcoal sketch"  # Will be overridden by -update
directional_clip_coeff: 1.0  # Loss weight for directional CLIP
use_saliency_pruning: True  # âœ… Enable saliency-adaptive pruning
saliency_pruning_freq: 50  # Conservative: prune every 50 steps

# ASDS loss
sds:
  crop_size: 512
  augmentations: "affine"
  guidance_scale: 100
  grad_scale: 1e-6
  t_range: [ 0.05, 0.95 ]
  warmup: 200  # Same as baseline for fair comparison
  use_curriculum: False  # Disable curriculum for cleaner test

# JVSP
clip:
  model_name: "RN101"
  feats_loss_type: "l2"
  feats_loss_weights: [ 0,0,1.0,1.0,0 ]
  fc_loss_weight: 0.1
  augmentations: "affine"
  num_aug: 8  # 1 global + 8 augmented = 9 total views for directional CLIP
  vis_loss: 1
  text_visual_coeff: 0
perceptual:
  name: "lpips"
  lpips_net: 'vgg'
  coeff: 0.2